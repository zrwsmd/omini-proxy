<Window x:Class="WowProxy.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WowProxy.App"
        mc:Ignorable="d"
        Title="WowProxy" Height="560" Width="920">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock VerticalAlignment="Center" Margin="0,0,8,0" Text="sing-box 路径" />
            <TextBox Grid.Column="1" MinWidth="520" Text="{Binding SingBoxPath, UpdateSourceTrigger=PropertyChanged}" />
            <Button Grid.Column="2" Margin="8,0,0,0" Padding="12,6" Content="浏览" Command="{Binding BrowseSingBoxCommand}" />
        </Grid>

        <Grid Grid.Row="1" Margin="0,12,0,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="120" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="120" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <TextBlock VerticalAlignment="Center" Margin="0,0,8,0" Text="Mixed 端口" />
            <TextBox Grid.Column="1" Text="{Binding MixedPortText, UpdateSourceTrigger=PropertyChanged}" />

            <CheckBox Grid.Column="2" VerticalAlignment="Center" Margin="16,0,8,0" Content="启用 Clash API" IsChecked="{Binding EnableClashApi}" />
            <TextBox Grid.Column="3" Text="{Binding ClashApiPortText, UpdateSourceTrigger=PropertyChanged}" />

            <TextBlock Grid.Column="4" VerticalAlignment="Center" Margin="16,0,8,0" Text="Secret" />
            <TextBox Grid.Column="5" Text="{Binding ClashApiSecret, UpdateSourceTrigger=PropertyChanged}" />
        </Grid>

        <Border Grid.Row="2" BorderThickness="1" BorderBrush="#DDD" Padding="8" Margin="0,0,0,12">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock VerticalAlignment="Center" Margin="0,0,8,0" Text="订阅 URL" />
                    <TextBox Grid.Column="1" MinWidth="520" Text="{Binding SubscriptionUrl, UpdateSourceTrigger=PropertyChanged}" />
                    <Button Grid.Column="2" Margin="8,0,0,0" Padding="12,6" Content="更新订阅" Command="{Binding UpdateSubscriptionCommand}" />
                </Grid>

                <Grid Grid.Row="1" Margin="0,8,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock VerticalAlignment="Top" Margin="0,6,8,0" Text="节点链接" />
                    <TextBox
                        Grid.Column="1"
                        Height="64"
                        VerticalScrollBarVisibility="Auto"
                        AcceptsReturn="True"
                        Text="{Binding NodeImportText, UpdateSourceTrigger=PropertyChanged}" />
                    <Button Grid.Column="2" Margin="8,0,0,0" Padding="12,6" Content="导入" Command="{Binding ImportLinksCommand}" />
                </Grid>

                <Grid Grid.Row="2" Margin="0,8,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <ListBox
                        Height="120"
                        DisplayMemberPath="Name"
                        ItemsSource="{Binding Nodes}"
                        SelectedItem="{Binding SelectedNode, Mode=TwoWay}" />
                    <StackPanel Grid.Column="1" Margin="8,0,0,0">
                        <Button Padding="12,6" Content="应用节点" Command="{Binding ApplyNodeCommand}" />
                        <Button Margin="0,8,0,0" Padding="12,6" Content="清空" Command="{Binding ClearNodesCommand}" />
                    </StackPanel>
                </Grid>
            </Grid>
        </Border>

        <Grid Grid.Row="3">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Button Padding="16,6" Content="启动" Command="{Binding StartCommand}" />
                <Button Grid.Column="1" Margin="8,0,0,0" Padding="16,6" Content="停止" Command="{Binding StopCommand}" />
                <CheckBox Grid.Column="2" Margin="16,0,0,0" VerticalAlignment="Center" Content="系统代理" IsChecked="{Binding EnableSystemProxy}" />
                <TextBlock Grid.Column="3" VerticalAlignment="Center" Margin="16,0,0,0" Text="{Binding StatusText}" />
            </Grid>

            <TextBox
                Grid.Row="1"
                Margin="0,12,0,0"
                VerticalScrollBarVisibility="Auto"
                HorizontalScrollBarVisibility="Auto"
                IsReadOnly="True"
                FontFamily="Consolas"
                Text="{Binding LogsText, Mode=OneWay}"
                TextWrapping="NoWrap" />
        </Grid>
    </Grid>
</Window>
